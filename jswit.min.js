(function(m,h,n){var l=!!m.ActiveXObject,j,k=[],f={log:function(a){"undefined"!=typeof console&&j.debug&&console.log(a)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toUpperCase()==b.toUpperCase()},removeScriptTag:function(a){return a.replace(/<script[\w\W]*?<\/script>/g,"").replace(/<script[\w\W]*?>/g,"")},isObjectOrArray:function(a){return"object"==typeof a||"array"==typeof a?!0:!1},replace:function(a,b,c){return c.replace(RegExp(j.tagBegin+a+j.tagEnd,"gi"),b)},trim:function(a){return(a||
"").replace(/^\s+|\s+$/g,"")},toArray:function(a){var b,c=[];if(null!=a)if(b=a.length,null==b||a.split||a.setInterval||a.call)c[0]=a;else for(;b;)c[--b]=a[b];return c},merge:function(a,b){var c=0,d,e=a.length;if(l)for(;d=b[c++];)8!=d.nodeType&&(a[e++]=d);else for(;d=b[c++];)a[e++]=d;return a},stringToDom:function(a,b){var c=[];b=b||h;"undefined"==typeof b.createElement&&(b=b.ownerDocument||b[0]&&b[0].ownerDocument||h);a=a.replace(/(<(\w+)[^>]*?)\/>/g,function(a,b,c){return c.match(/^(abbr|br|col|img|input|link|meta|param|hr|area|embed)$/i)?
a:b+"></"+c+">"});var d=f.trim(a).toLowerCase(),e=b.createElement("div"),g=!d.indexOf("<opt")&&[1,"<select multiple='multiple'>","</select>"]||!d.indexOf("<leg")&&[1,"<fieldset>","</fieldset>"]||d.match(/^<(thead|tbody|tfoot|colg|cap)/)&&[1,"<table>","</table>"]||!d.indexOf("<tr")&&[2,"<table><tbody>","</tbody></table>"]||(!d.indexOf("<td")||!d.indexOf("<th"))&&[3,"<table><tbody><tr>","</tr></tbody></table>"]||!d.indexOf("<col")&&[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"]||l&&[1,
"div<div>","</div>"]||[0,"",""];for(e.innerHTML=g[1]+a+g[2];g[0]--;)e=e.lastChild;if(l){d=!d.indexOf("<table")&&0>d.indexOf("<tbody")?e.firstChild&&e.firstChild.childNodes:"<table>"==g[1]&&0>d.indexOf("<tbody")?e.childNodes:[];for(g=d.length-1;0<=g;--g)f.nodeName(d[g],"tbody")&&!d[g].childNodes.length&&d[g].parentNode.removeChild(d[g]);/^\s/.test(a)&&e.insertBefore(b.createTextNode(a.match(/^\s*/)[0]),e.firstChild)}a=f.toArray(e.childNodes);if(!(0===a.length&&!f.nodeName(a,"form")&&!f.nodeName(a,
"select")))return a[0]==n||f.nodeName(a,"form")||a.options?c.push(a):c=f.merge(c,a),c},html:function(a,b,c){for(;a.firstChild;)a.removeChild(a.firstChild);var d,e=[],g=f.stringToDom(b);f.nodeName(a,"table")&&f.nodeName(g[0],"tr")&&(a=a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")));for(d in g)b=g[d],f.nodeName(b,"script")?c?k.push(b):e.push(b):(1==b.nodeType&&!l&&(b.innerHTML=f.removeScriptTag(b.innerHTML)),1==a.nodeType&&a.appendChild(b));if(!c)for(d=0;d<
e.length;d++)b=e[d],eval(b.text||b.textContent||b.innerHTML||"")},initDomCommon:function(a){a.setAttribute("switInit",!0);a.setAttribute("switSource",a.innerHTML)},initDomInput:function(a){a.setAttribute("switInit",!0);a.setAttribute("switSource",a.getAttribute("value"))},initDomSelect:function(a){a.setAttribute("switInit",!0);a.setAttribute("switSource",a.innerHTML.replace(" selected",""))},renderDomInput:function(a,b){if("array"!=typeof b)if("object"!=typeof b)a.setAttribute("value",b);else for(var c in b)a.setAttribute(c,
b[c])},renderDomAttr:function(a,b){if(f.isObjectOrArray(b)){var c,d;for(c in b)if("css"!=c.toLowerCase()||!f.isObjectOrArray(b[c]))a.setAttribute(c,b[c]);else for(d in b[c])a.style[d]=b[c][d]}},renderDomCommon:function(a,b,c){if(f.isObjectOrArray(b)){var d,e,g,h="",k=a.getAttribute("switSource")||"",l={};for(d in b)if(isNaN(parseInt(d)))l[d]=b[d];else if(f.isObjectOrArray(b[d])){g=k;for(e in b[d])g=f.replace(e,b[d][e],g);h+=g}else h+=b[d];if(""!=h||0>k.indexOf(j.tagBegin)&&0>k.indexOf(j.tagEnd))f.renderDomAttr(a,
l);else for(d in h=k,l)h=f.replace(d,l[d],h);f.html(a,h,c)}else f.html(a,b,c)},isCrossDomain:function(a){a=a.toLowerCase();var b=h.domain.toLowerCase();return 0>a.indexOf("http://")&&0>a.indexOf("https://")||-1<a.indexOf("http://"+b)||-1<a.indexOf("https://"+b)?!1:!0},requireCrossDomain:function(a){var b=h.getElementsByTagName("body")[0],c="_switJsonp"+Math.random(),d=h.createElement("script");h.getElementById(c)&&b.removeChild(h.getElementById(c));d.src=a;d.type="text/javascript";d.defer=!0;d.id=
c;b.appendChild(d)},createRemoteRequest:function(){for(var a=[function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new XMLHttpRequest},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],b=0;b<a.length;b++)try{var c=a[b]();if(null!=c)return c}catch(d){}f.log("can not create xml http request")},remoteViewData:function(a,b,c,d){if(f.isCrossDomain(b))f.requireCrossDomain(b);else{var e=f.createRemoteRequest();e&&(c.method||(c.method="GET"),"function"!=typeof c.success&&(c.success=
f.renderDom),"function"!=typeof c.error&&(c.error=f.log),e.onreadystatechange=function(){if(4==e.readyState)if(200!=e.status){var b="unknown reponse";"string"==typeof e.responseText&&(b=f.removeScriptTag(e.responseText).replace(/<style[\w\W]*?<\/style>/g,"").replace(/<(?:.|\s)*?>/g,"").replace(/([\r\n])[\s]+/g,"\r\n"));c.error.call(this,b)}else if("string"!=typeof e.responseText)c.error.call(this,"invalid remote reponse type "+typeof e.responseText);else switch(b=f.trim(e.responseText),d){case "json":eval("b="+
b+";");case "html":c.success.call(this,a,b,1);break;default:c.error.call(this,"invalid remote data type of "+d)}},e.open(c.method,b),e.send(null))}},renderDom:function(a,b,c,d){if(a)if("undefined"==typeof c&&(c=0),c>j.maxRecursive)f.log("exceed max recursive of "+j.maxRecursive);else{if(1>c){if("string"==typeof b.url){f.remoteViewData(a,b.url,b,"html");return}if("string"==typeof b.json){f.remoteViewData(a,b.json,b,"json");return}}if("string"!=typeof a.nodeName)f.log("undefined DOM nodeName");else{var e;
c=a.nodeName.toLowerCase();c=c.substr(0,1).toUpperCase()+c.substr(1);a.getAttribute("switInit")||(e="initDom"+c,"function"!=typeof f[e]&&(e="initDomCommon"),f[e].call(this,a));e="renderDom"+c;"function"!=typeof f[e]&&(e="renderDomCommon");f[e].call(this,a,b,d)}}},render:function(a,b){if(f.isObjectOrArray(a)){var c,d,e;k=[];for(e in a){f.log("render start for "+e);if(0!=e.toLowerCase().indexOf("name="))f.renderDom(h.getElementById(e),a[e],b,!0);else{c=h.getElementsByName(e.substr(5));for(d=0;d<c.length;d++)f.renderDom(c[d],
a[e],b,!0)}f.log("render end for "+e)}for(d=0;d<k.length;d++)elem=k[d],eval(elem.text||elem.textContent||elem.innerHTML||"");k=[]}}};j={debug:!1,tagBegin:"%",tagEnd:"%",maxRecursive:1E3};m.swit={config:function(a){return"undefined"==typeof j[a]?n:j[a]},setConfig:function(a,b){if("object"==typeof a)for(var c in a)j[c]=a[c];else j[a]=b},callback:function(a){f.render(a,1)},render:f.render}})(window,document,void 0);
